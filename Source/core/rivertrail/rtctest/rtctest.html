<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"  />
  <!-- Prevents Chrome from offering to translate tests which generate
     random characters for things like attribute names -->
 <!-- <meta name="google" value="notranslate">-->
  <title>River Trail Conformance Tests</title>
    <script type="text/javascript" src="../Source/core/rivertrail/jslib/ParallelArray.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/narcissus/jsdefs.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/narcissus/jslex.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/narcissus/jsparse.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/narcissus/jsdecomp.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/compiler/definitions.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/compiler/helper.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/compiler/driver.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/compiler/dotviz.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/compiler/typeinference.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/compiler/rangeanalysis.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/compiler/inferblockflow.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/compiler/infermem.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/compiler/genOCL.js"></script>
    <script type="application/javascript" src="../Source/core/rivertrail/jslib/jit/compiler/runOCL.js"></script>
  <style>
    body{
     padding:10px;
    }
    #testlist{
	   position:fixed;
	   top:280px;
	   border:1px solid black;
	   left:0;
	   right:0;
	   bottom:0px;
	   overflow:auto;
	   padding:1em;
	}
	#testresult{
	   position:fixed;
	   top:0;
	   border:2px solid gray;
	   left:620px;
	   right:0;
	   height:200px;
	   overflow:auto;
	   padding:2em;
	}
  </style>
  <script type="text/javascript">
  function start(){
document.getElementById("testresult").scrollTop=1000000;}</script>
</head>
  
<body onload=start()>
  <h1>       River Trail</h1>
    <p> The expected output is based on <a href="http://wiki.ecmascript.org/doku.php?id=strawman:data_parallelism"> RiverTrail API.</a> </p>
 
  <!--Array table, sources used in the following calculation-->
  <table width="600px" border="1" cellpadding="0" cellspacing="0" >
    <caption>Source Parallelarray</caption>
    <thead>
      <tr> <th>Name</th>         <th>Source</th>        <th>length </th>            <th>Shape</th> </tr>
    </thead>
    <tbody>
      <tr> <td>Source0</td> <td ><1,2,3,4,5,6> </td>     <td>6</td> <td> </td> </tr>
      <tr> <td>Source1</td> <td><<0,1>,<1,2>,<2,3>> </td>     <td>3</td> <td>3,1</td> </tr>
      <tr> <td>Source2</td> <td><0.3333333333333333,2,5></td>     <td>3</td> <td> </td> </tr>
     </tbody>
  </table>
  <!--buttons to run and reset all tests-->
  <p>
   <input type="button" value="run all tests" id="runall" onClick="runAll();" />
   <span><input type="button" value="reset results" id="clean" onClick="resultClean();" /></span>
  </p>
  <!--inform window,show test result-->
  <div id="testresult"> 
    <span>Test results are shown here:</span>
  </div>
   <!--test table,cases divided by category in API-->   
  <div id="testlist">
   <table border="1" bgcolor="silver">
     <!--ParallelArray-->
     <tr> <th colspan="2"> ParallelArray</th> <th>Result</th></tr>
     <tr> <td><input type="button" value="run" id="button01" onClick="makeRegular();" /></td>
	      <td><span >Make regular parallel array by ParallelArray(size, elementalFunction)); </span></td>
	      <td><span id="result01" > </span></td>
	 </tr>
	 <tr> <td><input type="button" value="run" id="button02" onClick="makeRegular1();" /></td>
	      <td><span >Make regular parallel array source1 by ParallelArray(array); </span></td>
	      <td><span id="result02" > </span></td>
	 </tr>
     <tr> <td><input type="button" value="run" id="button0" onClick="makeUnRegular();" /></td>
	     <td><span >Make a unregular parallel array[1,2,[3,4]].</span></td>
	     <td><span id="result0" > </span></td>
	 </tr>
	 <tr> <td><input type="button" value="run" id="button03" onClick="makeEmpty();" /></td>
	     <td><span >Make an empty array.</span></td>
	     <td><span id="result03" > </span></td>
	 </tr>
	  <tr> <td><input type="button" value="run" id="button04" onClick="makeNested();" /></td>
	     <td><span >Make an nested array.</span></td>
	     <td><span id="result04" > </span></td>
	 </tr>
	 	  <tr> <td><input type="button" value="run" id="button05" onClick="testElement();" /></td>
	     <td><span >Test kinds of elements.</span></td>
	     <td><span id="result05" > </span></td>
	 </tr>
     <!--Map-->
	 <tr> <th colspan="2"> Map</th> <th>Result</th></tr>
     <tr><td><input type="button" value="run" id="button10" onClick="useMap01();" /> </td>
	     <td><span>Use map to pluse one source0.</span></td>
	     <td><span id="result10"> </span></td>
     </tr>
     <tr><td> <input type="button" value="run" id="button11" onClick="useMap02();" />  </td>
         <td> <span>Use map to pluse one source1.</span> </td>
         <td> <span id="result11"> </span></td>
     </tr>
	 <!--<tr><td> <input type="button" value="run" id="button15" onClick="useMap03();" />  </td>
         <td> <span>Use map to object source0.</span> </td>
         <td> <span id="result15"> </span></td>
     </tr>--->
	 <tr><td> <input type="button" value="run" id="button16" onClick="useMap04();" />  </td>
         <td> <span>Use map to compare elements.</span> </td>
         <td> <span id="result16"> </span></td>
     </tr>
     <!--Combine-->
     <tr> <th colspan="2"> Combine</th> <th>Result</th></tr>
     <tr><td> <input type="button" value="run" id="button12" onClick="useCombine01();" />  </td>
         <td> <span>Use combine to pluse one source0.</span> </td>
         <td> <span id="result12"> </span></td>
     </tr>
     <tr><td> <input type="button" value="run" id="button13" onClick="useCombine02();" />  </td>
         <td> <span>Use combine to pluse one source1 with depth 0.</span> </td>
         <td> <span id="result13"> </span></td>
     </tr>
     <tr><td> <input type="button" value="run" id="button14" onClick="useCombine03();" />  </td>
         <td> <span>Use combine to pluse one source1 with depth 1.</span> </td>
         <td> <span id="result14"> </span></td>
     </tr>
     <!--Scan-->
   	 <tr> <th colspan="2"> Scan</th> <th>Result</th></tr>
     <tr><td>  <input type="button" value="run" id="button20" onClick="useScan1();" /></td>
         <td>  <span>Use scan to calculate sum of source0.</span> </td>
         <td>  <span id="result20"> </span></td>
     </tr>
     <tr><td> <input type="button" value="run" id="button21" onClick="useScan2();" /></td>
         <td>  <span>Use scan to calculate sum of source1.</span> </td>
         <td>  <span id="result21"></span></td>
     </tr>
     <!--Reduce-->
   	<tr> <th colspan="2"> Reduce</th> <th>Result</th></tr>
    <tr><td>  <input type="button" value="run" id="button30" onClick="useReduce1();" /></td>
        <td>  <span>Use reduce to calculate sum of source0.</span> </td>
        <td>  <span id="result30"></span></td>
    </tr>
    <tr><td>  <input type="button" value="run" id="button31" onClick="useReduce2();" /> </td>
        <td>  <span>Use reduce to calculate sum of source1.</span></td>
        <td>  <span id="result31"></span></td>
    </tr>
    <tr><td>  <input type="button" value="run" id="button32" onClick="useReduce3();" /></td>
        <td>  <span>Use reduce to calculate sum of source2.</span></td>
        <td> <span id="result32"></span></td>
    </tr>
    <!--Scatter-->
   	<tr> <th colspan="2"> Scatter</th> <th>Result</th></tr>
    <tr><td> <input type="button" value="run" id="button40" onClick="useScatter1();" /> </td>
        <td>  <span>Use scatter to reorder source0 [4,5,0,3,1,2].</span></td>
        <td> <span id="result40"></span></td>
    </tr>
    </tr>
    <tr><td> <input type="button" value="run" id="button41" onClick="useScatter2();" />  </td>
        <td> <span>Use scatter to reorder source1 [2,0,1].</span> </td>
        <td>  <span id="result41"></span></td>
    </tr>
    <tr><td> <input type="button" value="run" id="button42" onClick="useScatter3();" /> </td>
        <td> <span>Use scatter to reorder source1 [2,1],without default value and confliction.</span></td>
        <td> <span id="result42"></span></td>
    </tr>
    <tr><td>  <input type="button" value="run" id="button43" onClick="useScatter4();" />  </td>
        <td>  <span>Use scatter to reorder source1 [2,1],with defaultvalue 520.</span> </td>
        <td> <span id="result43"></span></td>
    </tr>
    <tr><td>  <input type="button" value="run" id="button44" onClick="useScatter5();" /> </td>
        <td>  <span>Use scatter to reorder source0[4,5,0,3,4,2],with defaultvalue 520 and conflictfunction.</span></td>
        <td>  <span id="result44"></span></td>
    </tr>
    <tr><td>   <input type="button" value="run" id="button45" onClick="histogram();" /></td>
        <td>  <span>Use scatter to histogram[1,2,2,4,2,4,5].</span> </td>
        <td> <span id="result45"></span></td>
    </tr>
    <!--Filter-->
	<tr> <th colspan="2"> Filter</th> <th>Result</th></tr>
    <!--<tr><td>  <input type="button" value="run" id="button50" onClick="useFilter1();" /> </td>
        <td>  <span>Use filter [1,0,1,0,1,1] to source0.</span></td>
        <td> <span id="result50"></span></td>
    </tr>----->
    <tr><td>  <input type="button" value="run" id="button51" onClick="useFilter2();" /> </td>
        <td><span>Use filter to pick the elements >3 in source0.</span> </td>
        <td>  <span id="result51"></span></td>
    </tr>
    <tr><td>  <input type="button" value="run" id="button52" onClick="useFilter3();" /> </td>
        <td> <span>Use filter even element in source1.</span></td>
        <td> <span id="result52"></span></td>
    </tr>
    <!--Flatten-->
   	<tr> <th colspan="2"> Flat</th> <th>Result</th></tr>
    <tr><td>  <input type="button" value="run" id="button60" onClick="useFlatten1();"/>  </td>
        <td>   <span>Flat <<0,0><0,1><0,2>>.</span></td>
        <td>  <span id="result60"> </span></td>
    </tr>
    <tr><td>  <input type="button" value="run" id="button61" onClick="useFlatten2();" />  </td>
        <td>   <span>Flat source0.</span></td>
        <td>  <span id="result61"></span></td>
    </tr>
    <!--Partion-->
   	<tr> <th colspan="2"> Partion</th> <th>Result</th></tr>
    <tr><td>   <input type="button" value="run" id="button70" onClick="usePartition1();" /></td>
        <td>  <span>Partition source0 with 1 element.</span> </td>
        <td>  <span id="result70"></span></td>
    </tr>
    <tr><td>  <input type="button" value="run" id="button71" onClick="usePartition2();" />  </td>
        <td>    <span>Partition source0 with 1 element& 3 element.</span></td>
        <td> <span id="result71"></td>
    </tr>
    <tr><td>  <input type="button" value="run" id="button72" onClick="usePartition3();" />  </td>
        <td>    <span>Partition source1 with 3 element.</span></td>
        <td> <span id="result72"></td>
    </tr>
	<tr><td>  <input type="button" value="run" id="button73" onClick="usePartition4();" />  </td>
        <td>    <span>Partition an array three times.</span></td>
        <td> <span id="result73"></td>
    </tr>
     <!--Get-->
   	<tr> <th colspan="2"> Get</th> <th>Result</th></tr>
	<tr><td>  <input type="button" value="run" id="button80" onClick="useGet1();" />  </td>
        <td>    <span>Get indies' element get([2,0]) of <<0,0><0,1><0,2>>.</span></td>
        <td> <span id="result80"></td>
    </tr>
    <tr><td>  <input type="button" value="run" id="button81" onClick="useGet2();" />  </td>
        <td>    <span>Get indies' element get([2,3] of <<0,0><0,1><0,2>>)</span></td>
        <td> <span id="result81"></td>
    </tr>
   </table>
 </div>
  <!--test's source function-->
  <pre><script type="text/javascript" src="rtctestsource.js"> </script></pre>
  
</body>
</html>